<mat-form-field appearance="outline" class="w-100 mb-3" *ngIf="isFilterable">
  <mat-label>Search</mat-label>
  <input matInput (keyup)="applyFilter($event)" />
</mat-form-field>

<div class="table-container mat-elevation-z8">
  <table mat-table [dataSource]="dataSource" matSort >


    <!-- Dynamic Columns -->
    <ng-container *ngFor="let col of columns" [matColumnDef]="col.key">

      <th mat-header-cell *matHeaderCellDef class="mat-mdc-header-cell">
        <ng-container *ngIf="col.isSortable; else noSort">
          <span mat-sort-header>{{ col.label }}</span>
        </ng-container>

        <ng-template #noSort>
          {{ col.label }}
        </ng-template>
      </th>

      <td mat-cell *matCellDef="let row">
        {{ row[col.key] }}
      </td>

    </ng-container>


    <!-- Actions -->
    <ng-container matColumnDef="actions" *ngIf="actions?.length">
      <th mat-header-cell *matHeaderCellDef class="text-center mat-mdc-header-cell">Actions</th>
      <td mat-cell *matCellDef="let row" class="text-center">

        <ng-container *ngFor="let act of actions">
          <button *ngIf="canShow(act)" mat-icon-button color="primary"
            (click)="actionClick.emit({ action: act.type, row })">

            <mat-icon>{{ act.icon }}</mat-icon>
          </button>
        </ng-container>

      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns" sticky></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns" class="table-row"></tr>
  </table>
  <mat-paginator *ngIf="isPageable" [pageSizeOptions]="paginationSizes" [pageSize]="paginationSizes[0]" showFirstLastButtons></mat-paginator>
</div>